{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {"text" : "Video Genres of Top 1000 Youtubers", "fontSize": 26},
    "data": { "url": "./data/youtube_data_cleaned_fixed.csv" },
    "height": 650,
    "width": "container",
    "autosize": {"type": "fit", "contains": "padding"},
    
    "transform": [
        {
            "calculate": "indexof(['Animation','Movies','ASMR','Humor','Mystery', 'Animals & Pets', 'Autos & Vehicles'], datum.Category_2) >= 0 ? 'Entertainment' : datum.Category_2",
            "as": "Category_2"
        },
        {
            "calculate": "indexof(['Science & Technology','Education','Design/art','News & Politics', 'DIY & Life Hacks'], datum.Category_2) >= 0 ? 'Education & Knowledge' : datum.Category_2",
            "as": "Category_2"
        },
        {
            "calculate": "indexof(['Lifestyle','Daily vlogs','Fitness','Food & Drinks','Travel', 'Fashion', 'Health & Self Help', 'Beauty'], datum.Category_2) >= 0 ? 'Health and Lifestyle' : datum.Category_2",
            "as": "Category_2"
        },
        {
            "calculate": "indexof(['Video games','Sports','Toys'], datum.Category_2) >= 0 ? 'Gaming & Sports' : datum.Category_2",
            "as": "Category_2"
        },
        {
            "calculate": "datum.Category_2 == 'None' ? 'Other / None' : datum.Category_2",
            "as": "Category_2"
        },
        
        {
        "window": [{"op": "count", "as": "index"}],
        "sort": [{"field": "Category_2", "order": "descending"}, {"field": "Name", "order": "ascending"}]
        },
        {
        "calculate": "floor((datum.index - 1) / 40)", 
        "as": "row"
        },
        {
        "calculate": "(datum.index - 1) % 40", 
        "as": "col"
        }
    ],

    "layer" : [
        {"mark": {
            "type": "rect",
            "width": 15,
            "height": 15
        },

        "encoding": {
            "x": {"field": "col", "type": "ordinal", "axis": null},
            "y": {"field": "row", "type": "ordinal", "axis": null},
            "color": {
            "field": "Category_2",
            "type": "nominal",
            "title": "Genre",
            "legend" : {"symbolSize" : 200, "labelFontSize": 16, "titleFontSize" : 20},
            "scale" : {"range" : ["#EE6C4D","#FED766","#009FB7","#575D90","#00AF54"]}
            },

            "tooltip": [
            {"field": "Name", "type": "nominal"},
            {"field": "Category_2", "type": "nominal", "title" : "Genre"}
            ]
            
        }}
    ]


}
