{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {"text" : "Histogram of Effects from Social Media Time", "fontSize": 26},
  "data": {
    "url": "data/SMA.csv"
  },
  "autosize": {"type": "fit", "contains": "padding"},

  
  "repeat": [
    "Number of Sleep Hours per Night",
    "Mental Health Score",
    "Affected Academic Performance",
    "Conflicts Over Social Media",
    "Addicted Score"
  ],
  "columns": 3,
  "spec": {
    "width": 250,
    "height": 200,
    "mark": {
      "type": "bar",
      "color": "#4682b4"
    },
    "transform": [
      {
        "filter": "datum.Avg_Daily_Usage_Hours > 0"
      },
      {
        "calculate": "datum.Affected_Academic_Performance == 'Yes' ? 100 : 0",
        "as": "Affected Academic Performance"
      },
      {
        "bin": {"step": 0.5},
        "field": "HoursPerDay",
        "as": ["bin_start", "bin_end"]
      }
    ],
    "encoding": {
      "x": {
        "field": "Avg_Daily_Usage_Hours",
        "type": "quantitative",
        "bin": {
          "step": 0.5
        },
        "axis": {"title" : "Time Spent on Social Media (hours/day)", "titleFontSize": 14}
      },
      "y": {
        "aggregate": "average",
        "field": {
          "repeat": "repeat"
        },
        "axis": {"titleFontSize": 14},
        "type": "quantitative"
      },
      "tooltip": [
        {
          "type" : "nominal",
          "field": "HoursPerDay",
          "bin": true,
          "title": "Hours/Day",
          "format": ".1f"
        },
        {
          "aggregate": "average",
          "format": ".1f",
          "field": {"repeat": "repeat"},
          "title": "Average"
        }
      ]
    }
  }
}